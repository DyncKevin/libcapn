<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>libcapn: Feedback Service</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="libcapn"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libcapn
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Feedback Service<div class="ingroups"><a class="el" href="group__apn.html">Apple Push Notification Service</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Feedback Service.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Feedback Service:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__feedback.png" border="0" alt="" usemap="#group____feedback"/>
<map name="group____feedback" id="group____feedback">
<area shape="rect" id="node2" href="group__apn.html" title="Apple Push Notification Service. " alt="" coords="243,5,402,49"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:struct____apn__ctx"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apn.html#struct____apn__ctx">__apn_ctx</a></td></tr>
<tr class="memdesc:struct____apn__ctx"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection context.  <a href="group__apn.html#struct____apn__ctx">More...</a><br/></td></tr>
<tr class="separator:struct____apn__ctx"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gae987a014f823b3454f67082025aab0d2"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__apn.html#struct____apn__ctx">__apn_ctx</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></td></tr>
<tr class="separator:gae987a014f823b3454f67082025aab0d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac5e6c258440fdbf45bbdeb7dddb537ae"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__apn.html#struct____apn__ctx">__apn_ctx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a></td></tr>
<tr class="separator:gac5e6c258440fdbf45bbdeb7dddb537ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga81a3c9b0b65fe8476c6f7177efe77626"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga81a3c9b0b65fe8476c6f7177efe77626">apn_certificate</a> (const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error) <a class="el" href="platform_8h.html#a395f35223778c6b04a31c26c8c1624fa">__apn_attribute_warn_unused_result__</a></td></tr>
<tr class="memdesc:ga81a3c9b0b65fe8476c6f7177efe77626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a path to an SSL certificate used to establish secure connection.  <a href="#ga81a3c9b0b65fe8476c6f7177efe77626">More...</a><br/></td></tr>
<tr class="separator:ga81a3c9b0b65fe8476c6f7177efe77626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae72c80a16ef7e7101c898fe2ada40b69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gae72c80a16ef7e7101c898fe2ada40b69">apn_close</a> (<a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx)</td></tr>
<tr class="memdesc:gae72c80a16ef7e7101c898fe2ada40b69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes Apple Push Notification/Feedback Service connection.  <a href="#gae72c80a16ef7e7101c898fe2ada40b69">More...</a><br/></td></tr>
<tr class="separator:gae72c80a16ef7e7101c898fe2ada40b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2bc2ff50c2c568d8eedd0c0a27f1616"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gaf2bc2ff50c2c568d8eedd0c0a27f1616">apn_feedback</a> (const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, char ***tokens_array, uint32_t *tokens_array_count, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error)</td></tr>
<tr class="memdesc:gaf2bc2ff50c2c568d8eedd0c0a27f1616"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns array of device tokens which no longer exists.  <a href="#gaf2bc2ff50c2c568d8eedd0c0a27f1616">More...</a><br/></td></tr>
<tr class="separator:gaf2bc2ff50c2c568d8eedd0c0a27f1616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd202a20403c2ee852359682de557957"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gadd202a20403c2ee852359682de557957">apn_feedback_connect</a> (const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error) <a class="el" href="platform_8h.html#a395f35223778c6b04a31c26c8c1624fa">__apn_attribute_warn_unused_result__</a></td></tr>
<tr class="memdesc:gadd202a20403c2ee852359682de557957"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens Apple Push Feedback Service connection.  <a href="#gadd202a20403c2ee852359682de557957">More...</a><br/></td></tr>
<tr class="separator:gadd202a20403c2ee852359682de557957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1948a3dda1acd8f9c0e0811c6e0fea10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga1948a3dda1acd8f9c0e0811c6e0fea10">apn_feedback_tokens_array_free</a> (char **tokens_array, uint32_t tokens_array_count)</td></tr>
<tr class="memdesc:ga1948a3dda1acd8f9c0e0811c6e0fea10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees memory allocated for a tokens array, which returned <a class="el" href="group__feedback.html#gaf2bc2ff50c2c568d8eedd0c0a27f1616" title="Returns array of device tokens which no longer exists. ">apn_feedback()</a>  <a href="#ga1948a3dda1acd8f9c0e0811c6e0fea10">More...</a><br/></td></tr>
<tr class="separator:ga1948a3dda1acd8f9c0e0811c6e0fea10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03e25540da476abb4f096856e17f3fc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga03e25540da476abb4f096856e17f3fc1">apn_free</a> (<a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> *ctx)</td></tr>
<tr class="memdesc:ga03e25540da476abb4f096856e17f3fc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees memory allocated for a connection context.  <a href="#ga03e25540da476abb4f096856e17f3fc1">More...</a><br/></td></tr>
<tr class="separator:ga03e25540da476abb4f096856e17f3fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga04d4e14a2d4a67b38459d43fa2577b55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga04d4e14a2d4a67b38459d43fa2577b55">apn_mode</a> (<a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error)</td></tr>
<tr class="memdesc:ga04d4e14a2d4a67b38459d43fa2577b55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the connection mode.  <a href="#ga04d4e14a2d4a67b38459d43fa2577b55">More...</a><br/></td></tr>
<tr class="separator:ga04d4e14a2d4a67b38459d43fa2577b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5e8320d677eaf767a171b1f8842bf01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gab5e8320d677eaf767a171b1f8842bf01">apn_private_key</a> (const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error) <a class="el" href="platform_8h.html#a395f35223778c6b04a31c26c8c1624fa">__apn_attribute_warn_unused_result__</a></td></tr>
<tr class="memdesc:gab5e8320d677eaf767a171b1f8842bf01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a path to private key which used to establish secure connection.  <a href="#gab5e8320d677eaf767a171b1f8842bf01">More...</a><br/></td></tr>
<tr class="separator:gab5e8320d677eaf767a171b1f8842bf01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06714020814811b0d3f572485658a40c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga06714020814811b0d3f572485658a40c">apn_private_key_pass</a> (const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error) <a class="el" href="platform_8h.html#a395f35223778c6b04a31c26c8c1624fa">__apn_attribute_warn_unused_result__</a></td></tr>
<tr class="memdesc:ga06714020814811b0d3f572485658a40c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a private key passphrase.  <a href="#ga06714020814811b0d3f572485658a40c">More...</a><br/></td></tr>
<tr class="separator:ga06714020814811b0d3f572485658a40c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31efea3897421ededa4217f44adf976f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga31efea3897421ededa4217f44adf976f">apn_set_certificate</a> (<a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, const char *cert, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error)</td></tr>
<tr class="memdesc:ga31efea3897421ededa4217f44adf976f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets path to an SSL certificate which will be used to establish secure connection.  <a href="#ga31efea3897421ededa4217f44adf976f">More...</a><br/></td></tr>
<tr class="separator:ga31efea3897421ededa4217f44adf976f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7b1125708afa5b381e9c2f71a12c9c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#gaf7b1125708afa5b381e9c2f71a12c9c7">apn_set_mode</a> (<a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, uint8_t mode, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error)</td></tr>
<tr class="memdesc:gaf7b1125708afa5b381e9c2f71a12c9c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets connection mode.  <a href="#gaf7b1125708afa5b381e9c2f71a12c9c7">More...</a><br/></td></tr>
<tr class="separator:gaf7b1125708afa5b381e9c2f71a12c9c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga052055e0fadf889c6a2f42ecd93dbee2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__feedback.html#ga052055e0fadf889c6a2f42ecd93dbee2">apn_set_private_key</a> (<a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> ctx, const char *key, const char *pass, <a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *error)</td></tr>
<tr class="memdesc:ga052055e0fadf889c6a2f42ecd93dbee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a path to a private key which will be used to establish secure connection.  <a href="#ga052055e0fadf889c6a2f42ecd93dbee2">More...</a><br/></td></tr>
<tr class="separator:ga052055e0fadf889c6a2f42ecd93dbee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Feedback Service. </p>
<p>If you attempts to deliver a push notification to an application, but the application no longer exists on the device, the device reports that fact to Apple Push Notification Service. This situation often happens when the user has uninstalled the application. If a device reports failed-delivery attempts for an application, APNs needs some way to inform to you so that it can refrain from sending notifications to that device. Doing this reduces unnecessary message overhead and improves overall system performance.</p>
<p>For this purpose Apple Push Notification Service includes a feedback service that APNs continually updates with a per-application list of devices for which there were failed-delivery attempts.</p>
<dl class="section warning"><dt>Warning</dt><dd>You should periodically query the feedback service to get the list of device tokens for their applications, each of which is identified by its topic. Then, after verifying that the application hasn’t recently been re-registered on the identified devices, you should stop sending notifications to these devices.</dd></dl>
<p><b>Example:</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="apn_8h.html">apn.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="version_8h.html">version.h</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <a class="code" href="group__apn.html#struct____apn__ctx">apn_ctx_ref</a> ctx = NULL;</div>
<div class="line">    <a class="code" href="group__errors.html#struct____apn__error">apn_error_ref</a> error;</div>
<div class="line">    <span class="keywordtype">char</span> **<a class="code" href="group__apn.html#afabe02e4f9dbb92942450142706ccef4">tokens</a> = NULL;</div>
<div class="line">    uint32_t tokens_count = 0;</div>
<div class="line">    uint32_t i = 0;</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *cert_path = <span class="stringliteral">&quot;apns_cert.pem&quot;</span>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *key_path = <span class="stringliteral">&quot;apns_key.pem&quot;</span>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *key_passwd = <span class="stringliteral">&quot;test&quot;</span>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__apn.html#gaaac0049067c3610901a507f7d2e03f0c">apn_init</a>(&amp;ctx, cert_path, key_path, key_passwd, &amp;error) == <a class="code" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a>){</div>
<div class="line">        printf(<span class="stringliteral">&quot;%s: %d\n&quot;</span>, error-&gt;<a class="code" href="group__errors.html#af934f5c4512092d63454fee22cb64475">message</a>, <a class="code" href="group__errors.html#ga2e837ea5e7996615dea4edab6edee6bc">APN_ERR_CODE_WITHOUT_CLASS</a>(error-&gt;<a class="code" href="group__errors.html#a364b039a6f80ba37f7ea7433ff92f5f4">code</a>));</div>
<div class="line">        <a class="code" href="group__errors.html#gadb707b7a9ee5c41bb7abca611317228f">apn_error_free</a>(&amp;error);</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__feedback.html#gaf7b1125708afa5b381e9c2f71a12c9c7">apn_set_mode</a>(ctx, <a class="code" href="apn_8h.html#a6cc2a3e9417f1fed8bdcf5d57a59aaa2a09e94b0539b19502616f641bb323f540">APN_MODE_SANDBOX</a>, NULL);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__feedback.html#gadd202a20403c2ee852359682de557957">apn_feedback_connect</a>(ctx, &amp;error) == <a class="code" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a>) {</div>
<div class="line">       printf(<span class="stringliteral">&quot;Could not connected to Apple Feedback Servece: %s (%d)\n&quot;</span>, error-&gt;<a class="code" href="group__errors.html#af934f5c4512092d63454fee22cb64475">message</a>, <a class="code" href="group__errors.html#ga2e837ea5e7996615dea4edab6edee6bc">APN_ERR_CODE_WITHOUT_CLASS</a>(error-&gt;<a class="code" href="group__errors.html#a364b039a6f80ba37f7ea7433ff92f5f4">code</a>));</div>
<div class="line">       <a class="code" href="group__feedback.html#ga03e25540da476abb4f096856e17f3fc1">apn_free</a>(&amp;ctx);</div>
<div class="line">       <a class="code" href="group__errors.html#gadb707b7a9ee5c41bb7abca611317228f">apn_error_free</a>(&amp;error);</div>
<div class="line">       <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__feedback.html#gaf2bc2ff50c2c568d8eedd0c0a27f1616">apn_feedback</a>(ctx, &amp;tokens, &amp;tokens_count, &amp;error) == <a class="code" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a>) {</div>
<div class="line">       printf(<span class="stringliteral">&quot;Could not get tokens: %s (%d)\n&quot;</span>, error-&gt;<a class="code" href="group__errors.html#af934f5c4512092d63454fee22cb64475">message</a>,  <a class="code" href="group__errors.html#ga2e837ea5e7996615dea4edab6edee6bc">APN_ERR_CODE_WITHOUT_CLASS</a>(error-&gt;<a class="code" href="group__errors.html#a364b039a6f80ba37f7ea7433ff92f5f4">code</a>));</div>
<div class="line">       <a class="code" href="group__feedback.html#gae72c80a16ef7e7101c898fe2ada40b69">apn_close</a>(ctx);</div>
<div class="line">       <a class="code" href="group__feedback.html#ga03e25540da476abb4f096856e17f3fc1">apn_free</a>(&amp;ctx);</div>
<div class="line">       <a class="code" href="group__errors.html#gadb707b7a9ee5c41bb7abca611317228f">apn_error_free</a>(&amp;error);</div>
<div class="line">       <span class="keywordflow">return</span> 1;</div>
<div class="line">    } </div>
<div class="line">    </div>
<div class="line">    printf(<span class="stringliteral">&quot;Count: %d\n&quot;</span>, tokens_count);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; tokens_count; i++) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Token: %s\n&quot;</span>, tokens[i]);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="group__feedback.html#ga1948a3dda1acd8f9c0e0811c6e0fea10">apn_feedback_tokens_array_free</a>(tokens, tokens_count);    </div>
<div class="line">    <a class="code" href="group__feedback.html#gae72c80a16ef7e7101c898fe2ada40b69">apn_close</a>(ctx);</div>
<div class="line">    <a class="code" href="group__feedback.html#ga03e25540da476abb4f096856e17f3fc1">apn_free</a>(&amp;ctx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> <hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="struct____apn__ctx" id="struct____apn__ctx"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct __apn_ctx</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Connection context. </p>
<p>Uses to store connection data for Apple Push Notification/Feedback Service </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#_a0">feedback.c</a>, and <a class="el" href="send_push_8c-example.html#_a1">send_push.c</a>.</dd>
</dl></div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for __apn_ctx:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="struct____apn__ctx__coll__graph.png" border="0" usemap="#____apn__ctx_coll__map" alt="Collaboration graph"/></div>
<map name="____apn__ctx_coll__map" id="____apn__ctx_coll__map">
<area shape="rect" id="node2" href="apn_8h.html#struct____apn__binary__token" title="{__apn_binary_token\n||}" alt="" coords="5,153,147,234"/></map>
</div>
<table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a61a8e4cb3b88cb72181970cad8d63899"></a><a class="el" href="platform_8h.html#a8dc8083897335125630f1af5dafd5831">SOCKET</a></td>
<td class="fieldname">
sock</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a23445913fd272b3ebc02be032cb5f73a"></a>SSL *</td>
<td class="fieldname">
ssl</td>
<td class="fielddoc">
Pointer to <code>SSL</code> structure. <p>Is used to hold data for a TLS/SSL connection </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5eb5977d6e932932ad2db379f6a1aca4"></a>uint32_t</td>
<td class="fieldname">
__tokens_count</td>
<td class="fielddoc">
Device tokens count. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a67d8a63f816f33cd35adabeeaddc31eb"></a>char *</td>
<td class="fieldname">
certificate_file</td>
<td class="fielddoc">
Path to an SSL certificate file. <p>The SSL certificate used establish a secure connection </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad653593349de34720f244e4d40119cbe"></a>char *</td>
<td class="fieldname">
private_key_file</td>
<td class="fielddoc">
Path to private key file. <p>The private key used to establish secure connection </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="afabe02e4f9dbb92942450142706ccef4"></a><a class="el" href="apn_8h.html#a1a937975ab8028f95f11024471240aef">apn_binary_token_ref</a> *</td>
<td class="fieldname">
tokens</td>
<td class="fielddoc">
Target devices tokens. <p>The device token is an opaque identifier of a device that Apple Push Notification Service gives to the device when it first connects with it. Device token is used to identify a target device which should receive the notification </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aa3007fb736eb1a397d855b23b3a57d30"></a>char *</td>
<td class="fieldname">
private_key_pass</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a067fcf439ae2c3c592fb604104e4633b"></a>uint8_t</td>
<td class="fieldname">
feedback</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a6552a21e92c47f8061e55f29384958dd"></a>uint8_t</td>
<td class="fieldname">
mode</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gac5e6c258440fdbf45bbdeb7dddb537ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__apn.html#struct____apn__ctx">__apn_ctx</a>* <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gae987a014f823b3454f67082025aab0d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__apn.html#struct____apn__ctx">__apn_ctx</a> <a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga03e25540da476abb4f096856e17f3fc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> void apn_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees memory allocated for a connection context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- Pointer to pointer to <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#a11">feedback.c</a>, and <a class="el" href="send_push_8c-example.html#a13">send_push.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gae72c80a16ef7e7101c898fe2ada40b69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> void apn_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes Apple Push Notification/Feedback Service connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code>apn_ctx</code> structure </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#a13">feedback.c</a>, and <a class="el" href="send_push_8c-example.html#a24">send_push.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gaf7b1125708afa5b381e9c2f71a12c9c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t apn_set_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets connection mode. </p>
<p>Each connection limited to one of two modes, each with its own assigned IP address:</p>
<p><a class="el" href="apn_8h.html#a6cc2a3e9417f1fed8bdcf5d57a59aaa2ad48dd583337696ef6058435d06780163">APN_MODE_PRODUCTION</a> - Use the production mode when building the production version of the provider application. This mode uses gateway.push.apple.com, outbound TCP port 2195.</p>
<p><a class="el" href="apn_8h.html#a6cc2a3e9417f1fed8bdcf5d57a59aaa2a09e94b0539b19502616f641bb323f540">APN_MODE_SANDBOX</a> - Use the sandbox mode for initial development and testing of the provider application. It provides the same set of services as the production mode. The sandbox mode also acts as a virtual device, enabling simulated end-to-end testing. This mode uses gateway.sandbox.push.apple.com, outbound TCP port 2195.</p>
<dl class="section attention"><dt>Attention</dt><dd>You must get separate certificates for the sandbox mode and the production mode.</dd></dl>
<p>Default mode is <a class="el" href="apn_8h.html#a6cc2a3e9417f1fed8bdcf5d57a59aaa2ad48dd583337696ef6058435d06780163">APN_MODE_PRODUCTION</a></p>
<dl class="section since"><dt>Since</dt><dd>1.0.0 beta3</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>- Mode, must be <a class="el" href="apn_8h.html#a6cc2a3e9417f1fed8bdcf5d57a59aaa2a09e94b0539b19502616f641bb323f540">APN_MODE_SANDBOX</a>, or <a class="el" href="apn_8h.html#a6cc2a3e9417f1fed8bdcf5d57a59aaa2ad48dd583337696ef6058435d06780163">APN_MODE_PRODUCTION</a>. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to <code>apn_error</code> structure to return error information to the caller. Pass NULL as the <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="apn_8h.html#a62cf6d2d25236abf7592c68f3a7cd74b">APN_SUCCESS</a> on success</li>
<li><a class="el" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a> on failure with error information stored in <code>error</code></li>
</ul>
</dd></dl>
<p><b>Returned error codes (<a class="el" href="group__errors.html#ga1654b036b0456605a122e3269280f637" title="Returns error code. ">apn_error_code()</a>):</b></p>
<ul>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a68e1e740d6e710fb6906408474bfaca9" title="Connection contex is not initialized. ">APN_ERR_CTX_NOT_INITIALIZED</a> </li>
</ul>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#a8">feedback.c</a>, and <a class="el" href="send_push_8c-example.html#a9">send_push.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga31efea3897421ededa4217f44adf976f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t apn_set_certificate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets path to an SSL certificate which will be used to establish secure connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cert</td><td>- Path to a SSL certificate file. Must be a valid NULL-terminated string </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to apn_error structure to return error information to the caller. Pass NULL as the <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="apn_8h.html#a62cf6d2d25236abf7592c68f3a7cd74b">APN_SUCCESS</a> on success</li>
<li><a class="el" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a> on failure with error information stored in <code>error</code></li>
</ul>
</dd></dl>
<p><b>Returned error codes (<a class="el" href="group__errors.html#ga1654b036b0456605a122e3269280f637" title="Returns error code. ">apn_error_code()</a>):</b></p>
<ul>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a68e1e740d6e710fb6906408474bfaca9" title="Connection contex is not initialized. ">APN_ERR_CTX_NOT_INITIALIZED</a> </li>
</ul>

</div>
</div>
<a class="anchor" id="ga052055e0fadf889c6a2f42ecd93dbee2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t apn_set_private_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a path to a private key which will be used to establish secure connection. </p>
<dl class="section attention"><dt>Attention</dt><dd>In version 1.0.0 added a new argument <code>pass</code></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>- Path to a private key file. Must be a valid NULL-terminated string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pass</td><td>- Private key passphrase. Can be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to <code>apn_error</code> structure to return error information to the caller. Pass NULL as the <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="apn_8h.html#a62cf6d2d25236abf7592c68f3a7cd74b">APN_SUCCESS</a> on success</li>
<li><a class="el" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a> on failure with error information stored in <code>error</code></li>
</ul>
</dd></dl>
<p><b>Returned error codes (<a class="el" href="group__errors.html#ga1654b036b0456605a122e3269280f637" title="Returns error code. ">apn_error_code()</a>):</b></p>
<ul>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a68e1e740d6e710fb6906408474bfaca9" title="Connection contex is not initialized. ">APN_ERR_CTX_NOT_INITIALIZED</a> </li>
</ul>

</div>
</div>
<a class="anchor" id="ga04d4e14a2d4a67b38459d43fa2577b55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> int8_t apn_mode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the connection mode. </p>
<dl class="section since"><dt>Since</dt><dd>1.0.0 beta3</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to pointer to <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> structure to return error information to the caller. Pass NULL as the apn_error pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>-1 on error with error information stored to <code>error</code></li>
<li>mode </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ga81a3c9b0b65fe8476c6f7177efe77626"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> const char* apn_certificate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a path to an SSL certificate used to establish secure connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to pointer to <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> structure to return error information to the caller. Pass NULL as the apn_error pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Pointer to NULL-terminated string on success</li>
<li>NULL on failure with error information stored in <code>error</code></li>
</ul>
</dd></dl>
<p>The retuned value is read-only and must not be modified or freed </p>

</div>
</div>
<a class="anchor" id="gab5e8320d677eaf767a171b1f8842bf01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> const char* apn_private_key </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a path to private key which used to establish secure connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to pointer to <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> structure to return error information to the caller. Pass NULL as the <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Pointer to NULL-terminated string on success</li>
<li>NULL on failure with error information stored to <code>error</code></li>
</ul>
</dd></dl>
<p>The retuned value is read-only and must not be modified or freed </p>

</div>
</div>
<a class="anchor" id="ga06714020814811b0d3f572485658a40c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> const char* apn_private_key_pass </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a private key passphrase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to pointer to <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> structure to return error information to the caller. Pass NULL as the <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>Pointer to NULL-terminated string on success</li>
<li>NULL on failure with error information stored to <code>error</code></li>
</ul>
</dd></dl>
<p>The retuned value is read-only and must not be modified or freed </p>

</div>
</div>
<a class="anchor" id="gadd202a20403c2ee852359682de557957"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t apn_feedback_connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens Apple Push Feedback Service connection. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__feedback.html#gae72c80a16ef7e7101c898fe2ada40b69" title="Closes Apple Push Notification/Feedback Service connection. ">apn_close()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to pointer to <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> structure to return error information to the caller. Pass NULL as the <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> pointer, if error information should not be returned to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="apn_8h.html#a62cf6d2d25236abf7592c68f3a7cd74b">APN_SUCCESS</a> on success</li>
<li><a class="el" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a> on failure with error information stored in <code>error</code> </li>
</ul>
</dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#a10">feedback.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="gaf2bc2ff50c2c568d8eedd0c0a27f1616"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> uint8_t apn_feedback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__feedback.html#gac5e6c258440fdbf45bbdeb7dddb537ae">apn_ctx_ref</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char ***&#160;</td>
          <td class="paramname"><em>tokens_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tokens_array_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__errors.html#ga3f9070b535461026e4d0d0ae5c1562c9">apn_error_ref</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns array of device tokens which no longer exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- Pointer to an initialized <code><a class="el" href="group__feedback.html#gae987a014f823b3454f67082025aab0d2">apn_ctx</a></code> structure. Cannot be NULL </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tokens_array</td><td>- Pointer to a device tokens array. . The array should be freed - call <a class="el" href="group__feedback.html#ga1948a3dda1acd8f9c0e0811c6e0fea10" title="Frees memory allocated for a tokens array, which returned apn_feedback() ">apn_feedback_tokens_array_free()</a> function for it </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tokens_array_count</td><td>- Count tokens in <code>tokens_array</code> </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">error</td><td>- Pointer to pointer to <code><a class="el" href="group__errors.html#gaa424e426456164c91dee79e62a62d847">apn_error</a></code> structure to return error information to the caller</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="apn_8h.html#a62cf6d2d25236abf7592c68f3a7cd74b">APN_SUCCESS</a> on success</li>
<li><a class="el" href="apn_8h.html#a23bee0bada8ce1aedfb8f2bde0739c28">APN_ERROR</a> on failure with error information stored to <code>error</code></li>
</ul>
</dd></dl>
<p><b>Returned error codes (<a class="el" href="group__errors.html#ga1654b036b0456605a122e3269280f637" title="Returns error code. ">apn_error_code()</a>):</b></p>
<ul>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a68e1e740d6e710fb6906408474bfaca9" title="Connection contex is not initialized. ">APN_ERR_CTX_NOT_INITIALIZED</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a3807c42ef9716264d961d509b3c55ccf" title="No opened connection to Apple Push Feedback Service. ">APN_ERR_NOT_CONNECTED_FEEDBACK</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8ae2f89f9c0b099a660f1fb4bc7418ef71" title="Path to SSL certificate file which is used to set up a secure connection is not set. ">APN_ERR_CERTIFICATE_IS_NOT_SET</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8ac46a3cc14aaa0d0b2adc84557da76ada" title="Path to private key file which is used to set up a secure connection is not set. ">APN_ERR_PRIVATE_KEY_IS_NOT_SET</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a68a0529624d3a724f481dd2bce55dc98" title="system call select() returned error ">APN_ERR_SELECT</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a010bf4c38b3c2a3a0d258d50e1a01711" title="No free memory. ">APN_ERR_NOMEM</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8a2af17c3b43f8b3c17c7251d3b9e80bcf" title="Connection was closed. ">APN_ERR_CONNECTION_CLOSED</a></li>
<li><a class="el" href="group__errors.html#gga7cf31efe660cb0ab36a840f09a9fd5d8aa798dc742122179eaaddd31f2812c6bd" title="SSL_read failed. ">APN_ERR_SSL_READ_FAILED</a> </li>
</ul>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#a12">feedback.c</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ga1948a3dda1acd8f9c0e0811c6e0fea10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="platform_8h.html#a94629b8dff1d90bbdb3d20246a777316">__apn_export__</a> void apn_feedback_tokens_array_free </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>tokens_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tokens_array_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees memory allocated for a tokens array, which returned <a class="el" href="group__feedback.html#gaf2bc2ff50c2c568d8eedd0c0a27f1616" title="Returns array of device tokens which no longer exists. ">apn_feedback()</a> </p>
<p>This function allocates memory for a connection context which</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tokens_array</td><td>- Pointer to a device tokens array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tokens_array_count</td><td>- Count tokens in <code>tokens_array</code> </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="feedback_8c-example.html#a14">feedback.c</a>.</dd>
</dl>
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 28 2014 17:29:46 for libcapn by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
